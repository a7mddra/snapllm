/**
 * @license
 * Copyright 2026 a7mddra
 * SPDX-License-Identifier: Apache-2.0
 *
 * Visual/theme updates for CodeBlock:
 * - Frame/background anchored to #171717 (used in gradients)
 * - Subtle gradients + soft inset/outer shadows for depth (LLM-like)
 * - Updated button styling for copy/pill action
 *
 * NOTE: This file intentionally relies on gradients built from #171717
 * (rgba(23,23,23,...)) for the "everything is 171717" requirement while
 * keeping readable text using existing neutral variables.
 */

@import "../../../../styles/variables.css";

/* Reusable rgba of #171717 (hex 17 = decimal 23) for convenient use */
:root {
  --frame-171: rgba(23, 23, 23, 1);
  --frame-171-95: rgba(23, 23, 23, 0.95);
  --frame-171-90: rgba(23, 23, 23, 0.9);
  --frame-171-85: rgba(23, 23, 23, 0.85);
  --frame-171-70: rgba(23, 23, 23, 0.7);
  --gloss-light: rgba(255, 255, 255, 0.02);
  --gloss-mid: rgba(255, 255, 255, 0.01);
}

.wrapper {
  margin-top: 1rem;
  margin-bottom: 1rem;
  overflow: hidden;
  border-radius: 0.75rem;
  /* outer gradient frame built only from #171717 variants */
  background: linear-gradient(
    135deg,
    var(--frame-171) 0%,
    var(--frame-171-95) 50%,
    var(--frame-171) 100%
  );
  /* subtle border using translucency for a delicate separation */
  border: 1px solid rgba(255, 255, 255, 0.02);
  font-family:
    ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Segoe UI Mono",
    "Courier New", monospace;
  font-size: 0.875rem;
  /* soft inner depth like many web LLM code frames */
  box-shadow:
    0 6px 20px rgba(0, 0, 0, 0.65),
    inset 0 1px 0 rgba(255, 255, 255, 0.01);
}

/* header (language + copy) sits on a slightly different textured gradient */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.5rem 0.75rem;
  gap: 0.5rem;
  color: var(--neutral-300);
  background: linear-gradient(
    180deg,
    var(--frame-171-95) 0%,
    var(--frame-171-90) 100%
  );
  border-bottom: 1px solid rgba(255, 255, 255, 0.01);
}

/* Language label cluster */
.langLabel {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.langName {
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: lowercase;
  letter-spacing: 0.02em;
  /* pill-like background derived from same frame color (subtle gloss) */
  padding: 0.125rem 0.5rem;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    rgba(23, 23, 23, 0.98) 0%,
    rgba(23, 23, 23, 0.92) 100%
  );
  color: var(--neutral-200);
  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
}

/* textarea for editable mode */
.textarea {
  width: 100%;
  height: 100%;
  background: transparent;
  padding: 1rem;
  color: var(--neutral-300);
  font-family: inherit;
  font-size: 0.875rem;
  line-height: 1.6;
  resize: none;
  outline: none;
  border: none;
  display: block;
  /* provide a subtle inner gradient to separate text area visually */
  caret-color: var(--neutral-100);
}

/* copy button - pill, gradient-only feel, LLM-like */
.copyButton {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.8rem;
  background: linear-gradient(
    90deg,
    rgba(23, 23, 23, 0.88) 0%,
    rgba(23, 23, 23, 0.82) 100%
  );
  border: 1px solid rgba(255, 255, 255, 0.03);
  padding: 0.35rem 0.65rem;
  border-radius: 999px;
  cursor: pointer;
  color: var(--neutral-200);
  transition:
    background 120ms ease,
    opacity 120ms ease;
  align-self: center;
  white-space: nowrap;
  user-select: none;
  -webkit-tap-highlight-color: transparent;
  min-width: 4rem;
  justify-content: center;
}

.iconWrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

/* hover (still using gradients only â€” no new color hues) */
/* hover: simple bright color, no movement/shadow */
.copyButton:hover {
  background: linear-gradient(
    90deg,
    rgba(38, 38, 38, 1) 0%,
    rgba(38, 38, 38, 0.95) 100%
  );
  opacity: 1;
}

/* disabled/copy state */
.copyButton:disabled,
.copyButton[aria-disabled="true"] {
  cursor: default;
  opacity: 0.7;
  transform: none;
  box-shadow: none;
}

/* express copied state via attribute (set in component) */
.copyButton[data-copied="true"] {
  border-color: rgba(255, 255, 255, 0.05);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.02);
}

/* content area (code) */
.content {
  position: relative;
  width: 100%;
  overflow-x: auto;
  padding: 1rem;
  /* inner block uses a slightly more contrasted gradient (still #171717 family) */
  background: linear-gradient(
    180deg,
    var(--frame-171-90) 0%,
    var(--frame-171-85) 100%
  );
}

/* fallback pre styling */
.pre {
  color: var(--neutral-300);
  font-family: inherit;
  font-size: 0.875rem;
  line-height: 1.6;
  margin: 0;
  white-space: pre;
  tab-size: 2;
}

/* shiki container should appear "floating" with no own background */
.shikiContainer {
  font-size: 0.875rem;
  line-height: 1.6;
  margin: 0;
}

/* remove any conflicting background applied by shiki's inline styles */
.shikiContainer pre {
  margin: 0;
  background-color: transparent !important;
}

/* responsive niceties */
@media (max-width: 640px) {
  .header {
    padding: 0.5rem;
  }
  .content {
    padding: 0.75rem;
  }
  .langName {
    font-size: 0.7rem;
    padding: 0.1rem 0.45rem;
  }
}
